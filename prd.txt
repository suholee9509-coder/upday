# upday - Product Requirements Document

## Overview
upday is a timeline-based global news platform that provides AI-summarized news articles from various tech, science, and startup sources.

## Core Features

### 1. News Timeline
- Display news articles in reverse chronological order
- Group articles by date
- Support category filtering (AI, Startup, Science, Design, Space, Dev)
- Support keyword search

### 2. News Cards
- Title (highest visual weight)
- AI-generated summary (2-3 sentences)
- Thumbnail image (from article og:image or RSS media)
- Timestamp (relative time)
- Category badge
- Source name with external link

### 3. Data Sources
- RSS feeds from major tech/science publications
- Categories: AI, Startup, Science, Design, Space, Dev

## Technical Requirements

### RSS Crawling - CRITICAL REQUIREMENTS

#### Article URL (sourceUrl)
**IMPORTANT**: The `sourceUrl` field MUST always contain the direct URL to the original article page.

- ✅ CORRECT: `https://techcrunch.com/2024/01/15/openai-announces-gpt5/`
- ❌ WRONG: `https://techcrunch.com/` (homepage)
- ❌ WRONG: `https://techcrunch.com/category/ai/` (category page)
- ❌ WRONG: `https://techcrunch.com/example-1` (placeholder/fake URL)

The RSS parser's `item.link` field contains the actual article URL. This must be:
1. Validated to ensure it's not a homepage or category page
2. Stored exactly as provided by the RSS feed
3. Never modified or replaced with placeholder URLs

#### Image URL (imageUrl)
Extract article thumbnail from (in priority order):
1. `media:content` RSS field
2. `media:thumbnail` RSS field
3. `enclosure` RSS field (if image type)
4. First `<img>` tag in content HTML

#### Required Validations
- Skip articles without valid article URLs
- Skip articles without titles
- Log warnings for skipped articles

### Database Schema
- `source_url`: TEXT NOT NULL UNIQUE - The actual article URL
- `image_url`: TEXT - Article thumbnail URL
- See `scripts/schema.sql` for full schema

### Environment Variables
```
VITE_SUPABASE_URL=<supabase-url>
VITE_SUPABASE_ANON_KEY=<anon-key>
SUPABASE_SERVICE_ROLE_KEY=<service-role-key>
```

## Deployment
- Platform: Cloudflare Workers
- Static Assets: Vite build output
- SPA Routing: `not_found_handling = "single-page-application"`
- CI/CD: GitHub → Cloudflare automatic deployment

## Performance Targets
- Lighthouse Performance: 90+
- LCP: < 2.5s
- FID: < 100ms
- CLS: < 0.1
