# Cloudflare Workers Configuration for upday

name = "upday"
compatibility_date = "2026-02-01"

# Static assets (Vite build output)
[assets]
directory = "./dist"
html_handling = "auto-trailing-slash"
# Using SPA mode for React Router - 404 handling is done in React app
# For static file 404s, public/404.html is served by Cloudflare Pages
not_found_handling = "single-page-application"

# Environment variables (set via Cloudflare dashboard or wrangler secret)
# SUPABASE_URL = "..."
# SUPABASE_SERVICE_ROLE_KEY = "..."
# CRON_SECRET = "..."

# Scheduled triggers for news ingestion
# Main cron is handled by upday-ingest worker (see wrangler-ingest.toml)
# Deploy with: wrangler deploy -c wrangler-ingest.toml
# Current schedule: Every 4 hours (0 */4 * * *)

# Ingestion worker (separate worker for cron jobs)
# Deploy separately: wrangler deploy -c wrangler-ingest.toml
